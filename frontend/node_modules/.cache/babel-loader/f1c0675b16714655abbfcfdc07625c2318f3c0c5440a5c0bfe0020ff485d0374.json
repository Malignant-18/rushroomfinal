{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/home/george-joseph/vscode/leaflet/frontend/src/Map.js\",\n  _s = $RefreshSig$();\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\n\n// Fix for missing marker icons in Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\nexport default function Map() {\n  _s();\n  const [toilets, setToilets] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  useEffect(() => {\n    async function fetchToilets() {\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/api/list\");\n        const data = await response.json();\n        setToilets(data);\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchToilets();\n  }, []);\n  const handleViewDetails = id => {\n    navigate(`/toilet/${id}`);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-4\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-[600px]\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Find Nearby Toilets\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [51.505, -0.09] // Set your default coordinates\n      ,\n      zoom: 13,\n      className: \"w-full h-full\",\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), toilets.map(toilet => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [toilet.latitude, toilet.longitude],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"font-bold text-lg mb-2\",\n              children: toilet.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Location:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 37\n              }, this), \" \", toilet.location]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Condition:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 37\n              }, this), \" \", toilet.condition]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Facilities:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 19\n              }, this), \" \", toilet.facilities ? `${toilet.facilities.baby_changing ? \"Baby Changing Station \" : \"\"}${toilet.facilities.wheelchair_accessible ? \"Wheelchair Accessible\" : \"\"}` : \"No special facilities\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleViewDetails(toilet.id),\n              className: \"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md w-full text-center\",\n              children: \"View Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)\n      }, toilet.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(Map, \"asn+XBhgBYPWmPN5owoT3NyhQaw=\", false, function () {\n  return [useNavigate];\n});\n_c = Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","MapContainer","TileLayer","Marker","Popup","useEffect","useState","useNavigate","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Map","toilets","setToilets","loading","setLoading","navigate","fetchToilets","response","fetch","data","json","error","console","log","handleViewDetails","id","className","children","fileName","lineNumber","columnNumber","center","zoom","url","attribution","map","toilet","position","latitude","longitude","name","location","condition","facilities","baby_changing","wheelchair_accessible","onClick","_c","$RefreshReg$"],"sources":["/home/george-joseph/vscode/leaflet/frontend/src/Map.js"],"sourcesContent":["\"use client\";\n\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\n\n// Fix for missing marker icons in Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\n});\n\nexport default function Map() {\n  const [toilets, setToilets] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    async function fetchToilets() {\n      try {\n        const response = await fetch(\"http://127.0.0.1:5000/api/list\");\n        const data = await response.json();\n        setToilets(data);\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchToilets();\n  }, []);\n\n  const handleViewDetails = (id) => {\n    navigate(`/toilet/${id}`);\n  };\n\n  if (loading) {\n    return <div className=\"text-center p-4\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"w-full h-[600px]\">\n      <h1 className=\"text-2xl font-bold mb-4\">Find Nearby Toilets</h1>\n      <MapContainer\n        center={[51.505, -0.09]} // Set your default coordinates\n        zoom={13}\n        className=\"w-full h-full\"\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        />\n        \n        {toilets.map((toilet) => (\n          <Marker\n            key={toilet.id}\n            position={[toilet.latitude, toilet.longitude]}\n          >\n            <Popup>\n              <div className=\"p-2\">\n                <h2 className=\"font-bold text-lg mb-2\">{toilet.name}</h2>\n                <p className=\"mb-1\"><strong>Location:</strong> {toilet.location}</p>\n                <p className=\"mb-1\"><strong>Condition:</strong> {toilet.condition}</p>\n                <p className=\"mb-2\">\n                  <strong>Facilities:</strong>{\" \"}\n                  {toilet.facilities\n                    ? `${toilet.facilities.baby_changing ? \"Baby Changing Station \" : \"\"}${\n                        toilet.facilities.wheelchair_accessible ? \"Wheelchair Accessible\" : \"\"\n                      }`\n                    : \"No special facilities\"}\n                </p>\n                <button\n                  onClick={() => handleViewDetails(toilet.id)}\n                  className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md w-full text-center\"\n                >\n                  View Details\n                </button>\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n      </MapContainer>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}